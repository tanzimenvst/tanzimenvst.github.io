<!DOCTYPE html>
<html>
  <head>
    <title>Route Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />

    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: auto;
      }
      .proj p, ul, h2 {
        margin-bottom: 0;
      }
      h2 {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .section-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 25px;
        margin-top: 25px;
        box-shadow: 0 6px 20px rgba(0,0,0,0.05);
      }
      .badge {
        margin-right: 5px;
        font-size: 0.8rem;
        padding: 8px;
      }
      .desc {
        text-align: justify;
      }

      #map {
        height: 580px;
        width: 100%;
      }
      .info {
        padding: 10px;
        background: hsla(35, 45%, 77%, 0.5);
        border-radius: 15px 15px 0 0;
        text-align: center;
      }

      @media (max-width: 767px) {
          .container, .container-sm {
              max-width: fit-content;
          }
      }
    </style>
  </head>
  <body>
    <div class="container proj mb-4">

      <!-- Heading -->
      <div class="section-card shadow border-0 p-4 mb-4 mt-2">
        <h2 class="fw-bold">Shortest Route Tracking WebMap</h2>
      </div>

      <!-- Map -->
      <div class="section-card shadow border-0 p-0 mb-5">
        <div class="info">Click On Map To Set Start Point And End Point</div>
        <div id="map"></div>
      </div>

      <!-- Project Overview -->
      <div class="section-card shadow border-0 p-4 mb-4 mt-4">
        <h5 class="fw-bold mb-3">Project Overview</h5>
        <hr>
        <p class="desc">A dynamic, interactive web application designed to calculate and visualize the most efficient routes between two geographic points. By leveraging real-time routing engines, this tool provides instant turn-by-turn navigation and distance metrics, solving the complexity of spatial data visualization in a clean, user-centric interface.</p>
      </div>

      <!-- TECHNOLOGIES USED -->
      <div class="section-card shadow border-0 p-4">
        <h5 class="fw-bold mb-3">Technologies Used</h5>
        <hr>
    
        <span class="badge bg-secondary me-1 mb-1">HTML</span>
        <span class="badge bg-secondary me-1 mb-1">CSS</span>
        <span class="badge bg-secondary me-1 mb-1">Bootstrap</span>
        <span class="badge bg-secondary me-1 mb-1">JavaScript</span>
        <span class="badge bg-secondary me-1 mb-1">Leaflet</span>
        <span class="badge bg-secondary me-1 mb-1">Leaflet Routing Machine</span>
        <span class="badge bg-secondary me-1 mb-1">OSRM</span>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <script>
      (() => {
        var e = {
            969: () => {
              (L.Control.basemapsSwitcher = L.Control.extend({
                options: { position: "topright" },
                initialize: function (e, t) {
                  L.Util.setOptions(this, t), (this.layers = e);
                },
                onAdd: function (e) {
                  var t = this,
                    n = (this.container = L.DomUtil.create(
                      "div",
                      "leaflet-control-basemapsSwitcher"
                    ));
                  return (
                    this._createItems(),
                    this._collapse(),
                    n.addEventListener("mouseover", function () {
                      t._expand();
                    }),
                    n.addEventListener("mouseout", function () {
                      t._collapse();
                    }),
                    n
                  );
                },
                _createItems: function () {
                  var e = this;
                  this.layers.forEach(function (t, n) {
                    var r;
                    t.id = n;
                    var a = L.DomUtil.create("div", "basemapImg"),
                      i = L.DomUtil.create("div"),
                      o = L.DomUtil.create("div", "name"),
                      s = L.DomUtil.create("div", "check");
                    (o.innerHTML = t.name),
                      null !== (r = t.layer) &&
                        void 0 !== r &&
                        r._map &&
                        ((e.activeMap = t), s.classList.add("activeMap")),
                      (i.style.backgroundImage = "url(".concat(t.icon, ")")),
                      a.append(i),
                      i.append(s),
                      i.append(o),
                      a.addEventListener("click", function () {
                        var n;
                        e._removeLayers(t.layer),
                          (null !== (n = t.layer) && void 0 !== n && n._map) ||
                            (t.layer.addTo(e._map),
                            (e.activeMap = t),
                            e._collapse(),
                            s.classList.add("activeMap"));
                      }),
                      e.container.append(a);
                  });
                },
                _removeLayers: function (e) {
                  var t = this;
                  this.layers.forEach(function (n) {
                    var r;
                    n.layer._leaflet_id !== e._leaflet_id &&
                      null !== (r = n.layer) &&
                      void 0 !== r &&
                      r._map &&
                      t._map.removeLayer(n.layer);
                  });
                },
                _collapse: function () {
                  var e = this;
                  this.container.childNodes.forEach(function (t, n) {
                    n !== e.activeMap.id &&
                      (t.classList.add("hidden"),
                      t.querySelector(".check").classList.remove("activeMap"));
                  });
                },
                _expand: function () {
                  this.container.childNodes.forEach(function (e) {
                    e.classList.remove("hidden");
                  });
                },
              })),
                (L.basemapsSwitcher = function (e, t) {
                  return new L.Control.basemapsSwitcher(e, t);
                });
            },
            188: (e, t, n) => {
              "use strict";
              n.d(t, { Z: () => i });
              var r = n(645),
                a = n.n(r)()(function (e) {
                  return e[1];
                });
              a.push([
                e.id,
                ".hidden {\r\n    display: none;\r\n}\r\n\r\n.leaflet-control-basemapsSwitcher{\r\n    height: auto;\r\n    width: auto;\r\n    display:flex;\r\n}\r\n\r\n.leaflet-control-basemapsSwitcher:hover{\r\n    cursor: pointer;\r\n}\r\n\r\n.basemapImg{\r\n    box-shadow: 2px 2px 5px rgb(0 0 0 / 65%);\r\n    background-color: #fff;\r\n    margin:5px;\r\n    padding:5px;\r\n    border-radius: 3px 3px;\r\n}\r\n\r\n.basemapImg div{\r\n    background-size: 70px 70px;\r\n    width: 70px;\r\n    height: 70px;\r\n    border-radius: 3px 3px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n}\r\n\r\n.basemapImg div .name{\r\n    width:100%;\r\n    height:auto;\r\n    background-color: rgba(255, 255, 255, 0.6);\r\n    border-radius: 0;\r\n    color:black;\r\n    display: flex;\r\n    align-items: center;\r\n    font-weight: 500;\r\n    padding:1px;\r\n}\r\n\r\n.basemapImg div .check{\r\n    width:auto;\r\n    height:auto;\r\n    border-radius: 0;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    font-weight: 500;\r\n    padding:1px;\r\n    content:''\r\n}\r\n\r\n.activeMap::before{\r\n    color:white;\r\n    content: 'âœ”';\r\n    width: 18px;\r\n    height: 18px;\r\n    background-color: #387B23;\r\n    border-radius: 10px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}",
                "",
              ]);
              const i = a;
            },
            645: (e) => {
              "use strict";
              e.exports = function (e) {
                var t = [];
                return (
                  (t.toString = function () {
                    return this.map(function (t) {
                      var n = e(t);
                      return t[2]
                        ? "@media ".concat(t[2], " {").concat(n, "}")
                        : n;
                    }).join("");
                  }),
                  (t.i = function (e, n, r) {
                    "string" == typeof e && (e = [[null, e, ""]]);
                    var a = {};
                    if (r)
                      for (var i = 0; i < this.length; i++) {
                        var o = this[i][0];
                        null != o && (a[o] = !0);
                      }
                    for (var s = 0; s < e.length; s++) {
                      var c = [].concat(e[s]);
                      (r && a[c[0]]) ||
                        (n &&
                          (c[2]
                            ? (c[2] = "".concat(n, " and ").concat(c[2]))
                            : (c[2] = n)),
                        t.push(c));
                    }
                  }),
                  t
                );
              };
            },
            379: (e, t, n) => {
              "use strict";
              var r,
                a = function () {
                  return (
                    void 0 === r &&
                      (r = Boolean(
                        window && document && document.all && !window.atob
                      )),
                    r
                  );
                },
                i = (function () {
                  var e = {};
                  return function (t) {
                    if (void 0 === e[t]) {
                      var n = document.querySelector(t);
                      if (
                        window.HTMLIFrameElement &&
                        n instanceof window.HTMLIFrameElement
                      )
                        try {
                          n = n.contentDocument.head;
                        } catch (e) {
                          n = null;
                        }
                      e[t] = n;
                    }
                    return e[t];
                  };
                })(),
                o = [];
              function s(e) {
                for (var t = -1, n = 0; n < o.length; n++)
                  if (o[n].identifier === e) {
                    t = n;
                    break;
                  }
                return t;
              }
              function c(e, t) {
                for (var n = {}, r = [], a = 0; a < e.length; a++) {
                  var i = e[a],
                    c = t.base ? i[0] + t.base : i[0],
                    p = n[c] || 0,
                    l = "".concat(c, " ").concat(p);
                  n[c] = p + 1;
                  var d = s(l),
                    u = { css: i[1], media: i[2], sourceMap: i[3] };
                  -1 !== d
                    ? (o[d].references++, o[d].updater(u))
                    : o.push({
                        identifier: l,
                        updater: v(u, t),
                        references: 1,
                      }),
                    r.push(l);
                }
                return r;
              }
              function p(e) {
                var t = document.createElement("style"),
                  r = e.attributes || {};
                if (void 0 === r.nonce) {
                  var a = n.nc;
                  a && (r.nonce = a);
                }
                if (
                  (Object.keys(r).forEach(function (e) {
                    t.setAttribute(e, r[e]);
                  }),
                  "function" == typeof e.insert)
                )
                  e.insert(t);
                else {
                  var o = i(e.insert || "head");
                  if (!o)
                    throw new Error(
                      "Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid."
                    );
                  o.appendChild(t);
                }
                return t;
              }
              var l,
                d =
                  ((l = []),
                  function (e, t) {
                    return (l[e] = t), l.filter(Boolean).join("\n");
                  });
              function u(e, t, n, r) {
                var a = n
                  ? ""
                  : r.media
                  ? "@media ".concat(r.media, " {").concat(r.css, "}")
                  : r.css;
                if (e.styleSheet) e.styleSheet.cssText = d(t, a);
                else {
                  var i = document.createTextNode(a),
                    o = e.childNodes;
                  o[t] && e.removeChild(o[t]),
                    o.length ? e.insertBefore(i, o[t]) : e.appendChild(i);
                }
              }
              function f(e, t, n) {
                var r = n.css,
                  a = n.media,
                  i = n.sourceMap;
                if (
                  (a ? e.setAttribute("media", a) : e.removeAttribute("media"),
                  i &&
                    "undefined" != typeof btoa &&
                    (r +=
                      "\n/*# sourceMappingURL=data:application/json;base64,".concat(
                        btoa(unescape(encodeURIComponent(JSON.stringify(i)))),
                        " */"
                      )),
                  e.styleSheet)
                )
                  e.styleSheet.cssText = r;
                else {
                  for (; e.firstChild; ) e.removeChild(e.firstChild);
                  e.appendChild(document.createTextNode(r));
                }
              }
              var h = null,
                m = 0;
              function v(e, t) {
                var n, r, a;
                if (t.singleton) {
                  var i = m++;
                  (n = h || (h = p(t))),
                    (r = u.bind(null, n, i, !1)),
                    (a = u.bind(null, n, i, !0));
                } else
                  (n = p(t)),
                    (r = f.bind(null, n, t)),
                    (a = function () {
                      !(function (e) {
                        if (null === e.parentNode) return !1;
                        e.parentNode.removeChild(e);
                      })(n);
                    });
                return (
                  r(e),
                  function (t) {
                    if (t) {
                      if (
                        t.css === e.css &&
                        t.media === e.media &&
                        t.sourceMap === e.sourceMap
                      )
                        return;
                      r((e = t));
                    } else a();
                  }
                );
              }
              e.exports = function (e, t) {
                (t = t || {}).singleton ||
                  "boolean" == typeof t.singleton ||
                  (t.singleton = a());
                var n = c((e = e || []), t);
                return function (e) {
                  if (
                    ((e = e || []),
                    "[object Array]" === Object.prototype.toString.call(e))
                  ) {
                    for (var r = 0; r < n.length; r++) {
                      var a = s(n[r]);
                      o[a].references--;
                    }
                    for (var i = c(e, t), p = 0; p < n.length; p++) {
                      var l = s(n[p]);
                      0 === o[l].references && (o[l].updater(), o.splice(l, 1));
                    }
                    n = i;
                  }
                };
              };
            },
          },
          t = {};
        function n(r) {
          var a = t[r];
          if (void 0 !== a) return a.exports;
          var i = (t[r] = { id: r, exports: {} });
          return e[r](i, i.exports, n), i.exports;
        }
        (n.n = (e) => {
          var t = e && e.__esModule ? () => e.default : () => e;
          return n.d(t, { a: t }), t;
        }),
          (n.d = (e, t) => {
            for (var r in t)
              n.o(t, r) &&
                !n.o(e, r) &&
                Object.defineProperty(e, r, { enumerable: !0, get: t[r] });
          }),
          (n.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t)),
          (() => {
            "use strict";
            var e = n(379),
              t = n.n(e),
              r = n(188),
              a = { insert: "head", singleton: !1 };
            t()(r.Z, a);
            r.Z.locals;
            n(969);
            var i = L.map("map").setView([23.7965, 90.429], 6);
            new L.basemapsSwitcher(
              [
                {
                  layer: L.tileLayer(
                    "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"
                  ).addTo(i),
                  icon: "../images/alidade_smooth.png",
                  name: "CartoDB",
                },
                {
                  layer: L.tileLayer(
                    "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                  ),
                  icon: "../images/openstreetmap.png",
                  name: "OSM",
                },
                {
                  layer: L.tileLayer(
                    "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
                  ),
                  icon: "../images/alidade_satellite.png",
                  name: "Satellite",
                },
              ],
              { position: "bottomleft" }
            ).addTo(i);

            let startPoint = null;
            let endPoint = null;
            let routingControl = null;
            let startMarker = null;
            let endMarker = null;

            function clearMap() {
              if (routingControl) {
                i.removeControl(routingControl);
                routingControl = null;
              }
              if (startMarker) {
                i.removeLayer(startMarker);
                startMarker = null;
              }
              if (endMarker) {
                i.removeLayer(endMarker);
                endMarker = null;
              }
              startPoint = null;
              endPoint = null;
            }

            function onMapClick(e) {
              // If we're in the middle of setting points
              if (startPoint && !endPoint) {
                // Set end point normally
                endPoint = e.latlng;
                endMarker = L.marker(e.latlng)
                  .addTo(i)
                  .bindPopup("End Point")
                  .openPopup();
                calculateRoute();
                return;
              }

              // If there's an existing route
              if (routingControl) {
                if (
                  !confirm("Start new route ? This will clear current route.")
                ) {
                  return;
                }
                clearMap();
              }

              // Set new start point
              startPoint = e.latlng;
              startMarker = L.marker(e.latlng)
                .addTo(i)
                .bindPopup("Start Point")
                .openPopup();
            }

            function calculateRoute() {
              routingControl = L.Routing.control({
                  waypoints: [
                  L.latLng(startPoint.lat, startPoint.lng),
                  L.latLng(endPoint.lat, endPoint.lng),
                  ],
                  router: L.Routing.osrmv1({
                  serviceUrl: "https://router.project-osrm.org/route/v1",
                  }),
                  routeWhileDragging: false,
                  showAlternatives: false,
                  addWaypoints: false,
              }).addTo(i);

              // Listen for route events to get the bounds and fit the map
              routingControl.on("routesfound", function (e) {
                  let route = e.routes[0];
                  let bounds = L.latLngBounds(route.coordinates);
                  i.fitBounds(bounds);
              });
            }

            i.on("click", onMapClick);
          })();
      })();

      document
        .querySelector(".leaflet-control-basemapsSwitcher")
        .addEventListener("click", function (event) {
          event.stopPropagation();
        });
    </script>
    
  </body>
</html>
